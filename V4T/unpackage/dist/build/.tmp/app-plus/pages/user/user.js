(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"0e5f":function(o,e,t){"use strict";t.r(e);var n=t("d15f"),s=t.n(n);for(var r in n)"default"!==r&&function(o){t.d(e,o,function(){return n[o]})}(r);e["default"]=s.a},"2d50":function(o,e,t){"use strict";t.r(e);var n=t("5210"),s=t("0e5f");for(var r in s)"default"!==r&&function(o){t.d(e,o,function(){return s[o]})}(r);t("e3eb");var c=t("2877"),a=Object(c["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},"325d":function(o,e,t){},5210:function(o,e,t){"use strict";var n=function(){var o=this,e=o.$createElement;o._self._c},s=[];t.d(e,"a",function(){return n}),t.d(e,"b",function(){return s})},d15f:function(o,e,t){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t("930b"),s=function(){return t.e("components/t-color-picker/t-color-picker").then(t.bind(null,"d9a2"))},r={components:{tColorPicker:s},data:function(){return{title:"Hello",uid:"00000",username:"工坊用户",imghead:"../../static/logo.png",wallpaper:null,bg_color:null,icon_mode:null,sec_bg_color:null,font_color:null,icon_menu_mode:null,btn_desc:"登录",muticolor:null,color:{r:72,g:72,b:72,a:1}}},onShow:function(){this.doUserStyle()},methods:{openWeb:function(o){plus.runtime.openWeb(o)},doChange:function(){null!=o.getStorageSync("localuser")?this.goto("/pages/user/services/change"):o.showToast({title:"请先登录！",icon:"none"})},doUserStyle:function(){var e=o.getStorageSync("localuser");null!=e&&e.id>=1e4?(null!=e.imghead&&(this.imghead=e.imghead),this.uid=e.id,this.username=e.username,this.wallpaper=e.wallpaper,null!=e.color&&(this.bg_color=e.color,"#484848"!=e.color&&(this.icon_mode="hard-light"),o.setBackgroundColor({backgroundColor:e.color,backgroundColorBottom:e.color,backgroundColorTop:e.color}),"100000"==e.color?this.muticolor="MutiColor":this.muticolor=null),this.btn_desc="注销"):(this.btn_desc="登录",o.setBackgroundColor({backgroundColor:"#484848",backgroundColorBottom:"#484848",backgroundColorTop:"#484848"}))},open:function(e){var t=o.getStorageSync("localuser");null!=t?this.$refs.colorPicker.open():o.showToast({title:"你必须先登录才能修改卡片颜色！",icon:"none"})},confirm:function(e){var t=this;o.request({url:this.websiteUrl+"/user/changecolor",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Cookie:o.getStorageSync("Cookie")},data:{color:e.hex},dataType:"json",success:function(e){o.showToast({title:"修改成功！",icon:"none"}),t.refreshUser()},fail:function(e){o.showToast({title:"服务器未响应！",icon:"none"})}})},changeImgHead:function(){var e=this;null!=o.getStorageSync("localuser")?o.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(t){(0,n.pathToBase64)(t.tempFilePaths[0]).then(function(t){o.request({url:e.websiteUrl+"/user/changeimghead",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Cookie:o.getStorageSync("Cookie")},data:{imghead:t},dataType:"json",success:function(t){1==t.data.code?(o.showToast({title:"修改成功！",icon:"none"}),e.refreshUser()):o.showToast({title:"上传错误！请换一张图片！",icon:"none"})},fail:function(e){o.showToast({title:"服务器未响应！",icon:"none"})}})}).catch(function(e){o.showToast({title:"图像转换错误！",icon:"none"})})}}):o.showToast({title:"请先登录再修改头像",icon:"none"})},changeWallpaper:function(){var e=this;null!=o.getStorageSync("localuser")?o.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(t){(0,n.pathToBase64)(t.tempFilePaths[0]).then(function(t){o.request({url:e.websiteUrl+"/user/changewallpaper",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Cookie:o.getStorageSync("Cookie")},data:{wallpaper:t},dataType:"json",success:function(t){1==t.data.code?(o.showToast({title:"修改成功！",icon:"none"}),e.refreshUser()):o.showToast({title:"上传错误！请换一张图片！",icon:"none"})},fail:function(e){o.showToast({title:"服务器未响应！",icon:"none"})}})}).catch(function(e){o.showToast({title:"图像转换错误！",icon:"none"})})}}):o.showToast({title:"请先登录再修改壁纸",icon:"none"})},domarket:function(){var e;console.log("Open Market!"," at pages\\user\\user.vue:437"),"Android"==plus.os.name?e="market://details?id=io.dcloud.UNI74AE070":o.showToast({title:"目前只限Android哦！",icon:"none"}),plus.runtime.openURL(e,function(e){o.showToast({title:"打开失败！请检查是否包含应用商店！",icon:"none"})})},refreshUser:function(){var e=this;o.request({url:this.websiteUrl+"/user/getUser",method:"GET",header:{Cookie:o.getStorageSync("Cookie")},dataType:"json",success:function(t){var n=t.data.data;o.setStorageSync("localuser",n),e.doUserStyle()}})},goto:function(e){0==e&&o.showToast({title:"施工中……",icon:"none",mask:!1,duration:1500}),o.navigateTo({url:e})},doUserAction:function(){null==o.getStorageSync("localuser")?this.goto("/pages/user/services/login"):(o.setStorageSync("localuser",null),this.imghead="../../static/logo.png",this.uid="00000",this.username="工坊用户",this.wallpaper=null,this.bg_color=null,this.icon_mode=null,this.btn_desc="登录",o.removeStorageSync("sign_date"),o.removeStorageSync("localsignnumber"),o.request({url:this.websiteUrl+"/user/logout",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){o.showToast({title:"注销成功！",icon:"none"})}}))}},computed:{}};e.default=r}).call(this,t("6e42")["default"])},e3eb:function(o,e,t){"use strict";var n=t("325d"),s=t.n(n);s.a}},[["bcf5","common/runtime","common/vendor"]]]);